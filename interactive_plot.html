
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Plotly Chart with Multiplier</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Charging and Discharging Schedule</h1>
    <div>
        <label for="multiplier">Multiplier:</label>
        <input type="range" id="multiplier" name="multiplier" min="0.1" max="5.0" step="0.1" value="1.0" oninput="updatePlot(this.value)">
        <span id="multiplier-value">1.0</span>
    </div>
    <div id="chart"></div>

    <script>
        var priceData = {"columns":["date","arb_energy_price","reg_up_price","reg_down_price","cres_capacity_price"],"index":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99],"data":[["2023-01-01T00:00:00.000",3.7454011885,0.3142918569,6.4203164615,0.5168172117],["2023-01-01T01:00:00.000",9.5071430641,6.3641041126,0.84139965,5.3135463157],["2023-01-01T02:00:00.000",7.3199394181,3.1435598108,1.6162871409,5.4063512161],["2023-01-01T03:00:00.000",5.986584842,5.0857069116,8.9855418853,6.374299015],["2023-01-01T04:00:00.000",1.5601864044,9.0756647393,6.0642905966,7.2609133372],["2023-01-01T05:00:00.000",1.5599452034,2.4929222915,0.0919705162,9.7585207946],["2023-01-01T06:00:00.000",0.5808361217,4.1038292304,1.0147154287,5.163003483],["2023-01-01T07:00:00.000",8.6617614577,7.5555113854,6.6350176911,3.2295647294],["2023-01-01T08:00:00.000",6.0111501174,2.2879816549,0.0506158385,7.9518619477],["2023-01-01T09:00:00.000",7.080725778,0.7697990983,1.6080805142,2.7083225126],["2023-01-01T10:00:00.000",0.205844943,2.8975145291,5.4873378937,4.3897142071],["2023-01-01T11:00:00.000",9.6990985216,1.6122128725,6.9189519769,0.7845638134],["2023-01-01T12:00:00.000",8.324426408,9.2969765234,6.519612595,0.2535074342],["2023-01-01T13:00:00.000",2.1233911068,8.0812037956,2.2426930946,9.6264841468],["2023-01-01T14:00:00.000",1.8182496721,6.3340375651,7.1217922135,8.3598012051],["2023-01-01T15:00:00.000",1.8340450985,8.7146059019,2.372490875,6.9597420609],["2023-01-01T16:00:00.000",3.0424224296,8.036720769,3.2539969816,4.0895294441],["2023-01-01T17:00:00.000",5.2475643163,1.8657005889,7.4649140512,1.7329432007],["2023-01-01T18:00:00.000",4.3194501864,8.9255899849,6.4963289905,1.5643704267],["2023-01-01T19:00:00.000",2.912291402,5.3934224192,8.4922341049,2.5024289816],["2023-01-01T20:00:00.000",6.1185289472,8.0744015516,6.576128923,5.4922666471],["2023-01-01T21:00:00.000",1.3949386065,8.9609129992,5.6830860334,7.145959227],["2023-01-01T22:00:00.000",2.9214464854,3.1800347497,0.9367476783,6.6019737672],["2023-01-01T23:00:00.000",3.6636184329,1.1005192453,3.6771580306,2.7993389695],["2023-01-02T00:00:00.000",4.5606998422,2.2793516254,2.6520236768,9.5486528066],["2023-01-02T01:00:00.000",7.8517596139,4.2710778863,2.4398964338,7.378969167],["2023-01-02T02:00:00.000",1.9967378216,8.1801476592,9.7301055475,5.5435405251],["2023-01-02T03:00:00.000",5.1423443841,8.6073058326,3.9309772467,6.1172074623],["2023-01-02T04:00:00.000",5.9241456886,0.0695213053,8.9204655518,4.1960006243],["2023-01-02T05:00:00.000",0.4645041272,5.1074730258,6.31138626,2.477309895],["2023-01-02T06:00:00.000",6.075448519,4.1741100315,7.9481130354,3.5597267865],["2023-01-02T07:00:00.000",1.7052412369,2.2210781047,5.0263709311,7.5784611046],["2023-01-02T08:00:00.000",0.6505159299,1.1986536733,5.7690388463,0.1439348863],["2023-01-02T09:00:00.000",9.4888553725,3.376151714,4.9251769382,1.1607264051],["2023-01-02T10:00:00.000",9.6563203307,9.4290970391,1.952429878,0.4600264202],["2023-01-02T11:00:00.000",8.0839734812,3.2320293202,7.2245211526,0.4072880232],["2023-01-02T12:00:00.000",3.0461376917,5.1879062174,2.8077236244,8.5546058401],["2023-01-02T13:00:00.000",0.9767211401,7.030189589,0.2431596643,7.0365785938],["2023-01-02T14:00:00.000",6.8423302651,3.6362960238,6.4547229591,4.7417382909],["2023-01-02T15:00:00.000",4.4015249374,9.7178208272,1.7711067941,0.9783416065],["2023-01-02T16:00:00.000",1.2203823484,9.6244729494,9.4045858435,4.9161587512],["2023-01-02T17:00:00.000",4.9517691011,2.5178229583,9.53928577,4.7347177078],["2023-01-02T18:00:00.000",0.3438852112,4.9724850589,9.1486439022,1.7320186991],["2023-01-02T19:00:00.000",9.0932040208,3.0087830982,3.7015870026,4.3385164924],["2023-01-02T20:00:00.000",2.587799816,2.8484049438,0.1545661653,3.985047344],["2023-01-02T21:00:00.000",6.6252228435,0.3688694735,9.2831856259,6.1585009805],["2023-01-02T22:00:00.000",3.1171107609,6.0956433398,4.2818414832,6.3509365087],["2023-01-02T23:00:00.000",5.2006802118,5.0267902323,9.6665481904,0.4530400977],["2023-01-03T00:00:00.000",5.4671027934,0.5147875125,9.6361997709,3.7461261463],["2023-01-03T01:00:00.000",1.8485445553,2.7864646424,8.5300945547,6.2585991571],["2023-01-03T02:00:00.000",9.6958462776,9.0826588597,2.9444889207,5.0313625858],["2023-01-03T03:00:00.000",7.7513282336,2.3956189067,3.850977286,8.5648984119],["2023-01-03T04:00:00.000",9.3949894156,1.4489487209,8.5113667152,6.5869363162],["2023-01-03T05:00:00.000",8.9482735043,4.8945276028,3.1692200516,1.6293442708],["2023-01-03T06:00:00.000",5.9789997881,9.8565045411,1.6949274669,0.705687474],["2023-01-03T07:00:00.000",9.2187423502,2.4205527151,5.5680126246,6.4241927821],["2023-01-03T08:00:00.000",0.8849250205,6.7213554741,9.3615477416,0.2651131054],["2023-01-03T09:00:00.000",1.9598286242,7.6161961533,6.9602979667,5.8577558127],["2023-01-03T10:00:00.000",0.4522728891,2.3763754399,5.7006117009,9.4023024142],["2023-01-03T11:00:00.000",3.2533033076,7.2821634861,0.9717649377,5.7547417788],["2023-01-03T12:00:00.000",3.8867728969,3.6778313272,6.150072267,3.8816992621],["2023-01-03T13:00:00.000",2.7134903177,6.3230583059,9.900538501,6.4328821844],["2023-01-03T14:00:00.000",8.2873750915,6.3352971076,1.4008401524,4.5825289049],["2023-01-03T15:00:00.000",3.5675332669,5.3577468407,5.1832965236,5.4561678932],["2023-01-03T16:00:00.000",2.8093450969,0.9028977005,8.7737307193,9.4146480878],["2023-01-03T17:00:00.000",5.4269608316,8.3530249559,7.4076861775,3.861026378],["2023-01-03T18:00:00.000",1.4092422497,3.2078006497,6.97015741,9.6119056382],["2023-01-03T19:00:00.000",8.0219698075,1.865185104,7.0248408399,9.0535064196],["2023-01-03T20:00:00.000",0.7455064368,0.4077514155,3.5949115122,1.9579113479],["2023-01-03T21:00:00.000",9.868869366,5.9089294319,2.9359184426,0.6936130088],["2023-01-03T22:00:00.000",7.722447693,6.7756436184,8.0936115548,1.0077800138],["2023-01-03T23:00:00.000",1.9871568153,0.1658782893,8.1011339468,0.1822182565],["2023-01-04T00:00:00.000",0.0552211712,5.120930583,8.6707231858,0.9444296076],["2023-01-04T01:00:00.000",8.1546142845,2.264957752,9.1324055256,6.8300677342],["2023-01-04T02:00:00.000",7.0685734385,6.4517279041,5.1134239886,0.7118864846],["2023-01-04T03:00:00.000",7.2900716804,1.74366429,5.0151629469,3.1897563029],["2023-01-04T04:00:00.000",7.7127034669,6.909377381,7.9829517897,8.4487531097],["2023-01-04T05:00:00.000",0.7404465173,3.867353463,6.4996393078,0.2327193574],["2023-01-04T06:00:00.000",3.5846572854,9.3672998874,7.0196687726,8.1446848259],["2023-01-04T07:00:00.000",1.1586905953,1.3752094415,7.9579266944,2.8185477477],["2023-01-04T08:00:00.000",8.6310342588,3.4106635105,8.9000534182,1.1816482762],["2023-01-04T09:00:00.000",6.2329812683,1.1347352124,3.3799515685,6.9673716536],["2023-01-04T10:00:00.000",3.3089802485,9.2469361828,3.7558295264,6.2894284678],["2023-01-04T11:00:00.000",0.6355835029,8.7733935338,0.9398193984,8.7747201353],["2023-01-04T12:00:00.000",3.1098232172,2.5794162772,5.78280141,7.350710438],["2023-01-04T13:00:00.000",3.2518332203,6.5998404603,0.359422738,8.0348093038],["2023-01-04T14:00:00.000",7.2960617834,8.172222002,4.6559801813,2.8203457257],["2023-01-04T15:00:00.000",6.3755747136,5.552008116,5.4264463471,1.7743954378],["2023-01-04T16:00:00.000",8.8721274258,5.2965057836,2.8654125213,7.5061475164],["2023-01-04T17:00:00.000",4.7221492516,2.418522909,5.9083326057,8.0683473927],["2023-01-04T18:00:00.000",1.1959424594,0.9310276781,0.3050024994,9.90505142],["2023-01-04T19:00:00.000",7.1324478722,8.9721575795,0.3734818875,4.1261767691],["2023-01-04T20:00:00.000",7.6078504862,9.0041805716,8.2260056066,3.7201808579],["2023-01-04T21:00:00.000",5.6127719757,6.3310145727,3.6019064141,7.7641296074],["2023-01-04T22:00:00.000",7.7096717995,3.3902979105,1.2706051265,3.4080354025],["2023-01-04T23:00:00.000",4.9379559636,3.4920957461,5.2224326005,9.307573256],["2023-01-05T00:00:00.000",5.2273282938,7.2595567887,7.699935531,8.5841275184],["2023-01-05T01:00:00.000",4.2754101836,8.9711025995,2.158210275,4.2899402738],["2023-01-05T02:00:00.000",0.2541912674,8.8708642427,6.2289047582,7.5087106779],["2023-01-05T03:00:00.000",1.0789142699,7.7987554586,0.8534746499,7.5454287408]]};

        function createPlot(multiplier) {
            var dateRange = priceData.index.map(date => new Date(date));
            var arb_energy = priceData.data.map(row => row[1] * (multiplier^0.8));
            var reg_up = priceData.data.map(row => row[2] * multiplier^0.9);
            var reg_down = priceData.data.map(row => row[3] * multiplier^1.1);
            var cres_capacity = priceData.data.map(row => row[4] * multiplier^0.5);

            var data = [
                { x: dateRange, y: arb_energy, mode: 'lines', name: 'Energy', line: { color: '#4e79a7' } },
                { x: dateRange, y: reg_up, mode: 'lines', name: 'Regulation up', line: { color: '#e15759' } },
                { x: dateRange, y: reg_down, mode: 'lines', name: 'Regulation down', line: { color: '#76b7b2' } },
                { x: dateRange, y: cres_capacity, mode: 'lines', name: 'Reserve', line: { color: '#59a14f' } }
            ];

            var layout = {
                title: 'Charging and Discharging Schedule',
                xaxis: { title: 'Time' },
                yaxis: { title: 'Power (MW)' },
                legend: {
                    orientation: 'h',
                    yanchor: 'bottom',
                    y: 1.1,
                    xanchor: 'center',
                    x: 0.5
                },
                autosize: true,
                margin: { l: 40, r: 40, t: 120, b: 40 }
            };

            Plotly.newPlot('chart', data, layout);
        }

        function updatePlot(value) {
            document.getElementById('multiplier-value').innerText = value;
            createPlot(parseFloat(value));
        }

        // Initialize plot
        createPlot(1.0);
    </script>
</body>
</html>
